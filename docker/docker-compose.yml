version: "3.9"

services:
    pg_shard1:
        image: postgres:15
        container_name: pg_shard1
        environment:
            POSTGRES_USER: ${POSTGRES_USER}
            POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
            POSTGRES_DB: shard1_db
        ports:
            - "5433:5432"
        volumes:
            - ./shard1:/docker-entrypoint-initdb.d

    pg_shard2:
        image: postgres:15
        container_name: pg_shard2
        environment:
            POSTGRES_USER: ${POSTGRES_USER}
            POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
            POSTGRES_DB: shard2_db
        ports:
            - "5434:5432"
        volumes:
            - ./shard2:/docker-entrypoint-initdb.d

    pg_shard3:
        image: postgres:15
        container_name: pg_shard3
        environment:
            POSTGRES_USER: ${POSTGRES_USER}
            POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
            POSTGRES_DB: shard3_db
        ports:
            - "5435:5432"
        volumes:
            - ./shard3:/docker-entrypoint-initdb.d

    pg_shard4:
        image: postgres:15
        container_name: pg_shard4
        environment:
            POSTGRES_USER: ${POSTGRES_USER}
            POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
            POSTGRES_DB: shard4_db
        ports:
            - "5436:5432"
        volumes:
            - ./shard4:/docker-entrypoint-initdb.d
